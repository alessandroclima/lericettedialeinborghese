<div class="container">
  @if (recipe()) {
  <div>
    <h1 class="mt-3 text-center custom-title">{{ recipe().titolo }}</h1>
    <nav style="--bs-breadcrumb-divider: '>';" aria-label="breadcrumb">
      <ol class="breadcrumb justify-content-center">
        <li class="breadcrumb-item"><a href="#">Home</a></li>
        <li class="breadcrumb-item"><a [routerLink]="['/admin/recipes']">Ricette</a></li>
        <li class="breadcrumb-item active" aria-current="page">{{ recipe().titolo }}</li>
      </ol>
    </nav>
    <div class="card mb-3 custom-card">
      @if (recipe().immagineurl) {
      <img [src]="'data:image/jpeg;base64,' + recipe().immagineurl" width="850" height="636" class="card-img-top"
        alt="Immagine Ricetta">
      }
      <div class="card-body" style="background-color: dodgerblue;">
        <ul class="list-group list-group-horizontal">
          <li class="list-group-item custom-card-text flex-fill">
            <strong><i class="bi bi-people-fill"></i></strong>
            <input type="number" style="border-style: hidden;" [(ngModel)]="numero" (keydown.enter)="onEnterPressed()"
              placeholder="Inserisci un numero">
          </li>
          <li class="list-group-item custom-card-text flex-fill ms-2">
            <strong><i class="bi bi-fire"></i></strong> {{ recipe().tempocottura }} Tempo di cottura
          </li>
          <li class="list-group-item custom-card-text flex-fill ms-2">
            <strong><i class="bi bi-alarm"></i></strong> {{ recipe().tempocottura }} Tempo di preparazione
          </li>
        </ul>
      </div>
    </div>
    <p-accordion [value]="['0']" [multiple]="true">
      <p-accordion-panel value="0">
        <p-accordion-header>Descrizione</p-accordion-header>
        <p-accordion-content>
          <p class="m-0">{{ recipe().descrizione }}</p>
        </p-accordion-content>
      </p-accordion-panel>
      <p-accordion-panel value="1">
        <p-accordion-header>Ingredienti</p-accordion-header>
        <p-accordion-content>
          <ul class="list-group list-group-flush">
            @for (ingredient of recipe().ingredientiQuantita; track ingredient) {
            <li class="list-group-item">
              @if ((ingredient.quantita == null || ingredient.quantita == 0) && (!ingredient.unitaMisura ||
              ingredient.unitaMisura === '')) {
              <span>{{ ingredient.ingredienteNome }}</span>
              }
              @if (ingredient.quantita && ingredient.quantita !== 0) {
              <span>{{ ingredient.ingredienteNome }} - {{ ingredient.quantita }} {{ ingredient.unitaMisura }}</span>
              }
              @if (ingredient.unitaMisura && ingredient.unitaMisura !== '' && (!ingredient.quantita ||
              ingredient.quantita === 0)) {
              <span>{{ ingredient.ingredienteNome }} {{ ingredient.unitaMisura }}</span>
              }
            </li>
            }

          </ul>
        </p-accordion-content>
      </p-accordion-panel>
      <p-accordion-panel value="2">
        <p-accordion-header>Procedimento</p-accordion-header>
        <p-accordion-content>
          <p-stepper [value]="1">
            @for (step of recipe().procedimento.split(';'); track step; let i = $index) {
            <p-step-item [value]="i + 1">
              <p-step>{{ step.trim() }}</p-step>
            </p-step-item>
            }

          </p-stepper>
        </p-accordion-content>
      </p-accordion-panel>
    </p-accordion>
  </div>
  } @else {
  <p>Loading...</p>
  }
</div>