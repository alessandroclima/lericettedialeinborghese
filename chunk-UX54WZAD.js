import{a as F}from"./chunk-3455J7NY.js";import{f as R,h as V}from"./chunk-PAG5MXE5.js";import{b as T,c as W,d as q,e as N,f as B,g as I,l as L,m as j}from"./chunk-XOXWJMWY.js";import{$ as g,$a as u,Ab as x,Cb as E,Db as b,Ia as l,Nb as m,Oa as S,Ob as s,T as P,Tb as _,Ub as h,Vb as C,Wa as y,_ as f,la as v,pb as d,ub as n,vb as i,wb as M}from"./chunk-XS7DYC3C.js";function k(e,w){e&1&&(n(0,"small",18),s(1,"Email obbligatoria"),i())}function A(e,w){e&1&&(n(0,"small"),s(1,"Formato email non valido"),i())}function D(e,w){if(e&1&&u(0,k,2,0,"small",18)(1,A,2,0,"small"),e&2){b();let o=m(13);d(o.errors!=null&&o.errors.required?0:-1),l(),d(o.errors!=null&&o.errors.email?1:-1)}}function G(e,w){e&1&&(n(0,"small",18),s(1,"Password obbligatoria"),i())}function O(e,w){if(e&1&&u(0,G,2,0,"small",18),e&2){b();let o=m(19);d(o.errors!=null&&o.errors.required?0:-1)}}function U(e,w){e&1&&(n(0,"small",18),s(1,"Le password non coincidono"),i())}var $=(()=>{class e{onSubmit(o){if(console.log("Form submitted",o.value),o.value.password!==o.value.confirmPassword){this.samePassword=!1,console.error("Passwords do not match");return}else this.samePassword=!0,console.log("Passwords match");if(o.invalid){console.error("Form is invalid",o.errors);return}console.log("Form is valid",o.value),this.authService.resetPassword(this.model()).subscribe({next:()=>{console.log("Password reset successfully"),this.router.navigateByUrl("/login").then(()=>{window.location.reload()})},error:c=>{console.error("Error registering user",c)}})}constructor(o){this.route=o,this.authService=P(F),this.router=P(V),this.samePassword=!1,this.model=v({email:"",password:"",confirmPassword:"",token:""})}ngOnInit(){this.model().email=this.route.snapshot.queryParamMap.get("email"),this.model().token=this.route.snapshot.queryParamMap.get("token")}static{this.\u0275fac=function(c){return new(c||e)(S(R))}}static{this.\u0275cmp=y({type:e,selectors:[["app-reset-password"]],decls:30,vars:6,consts:[["loginForm","ngForm"],["email","ngModel"],["password","ngModel"],["confirmPassword","ngModel"],[1,"container","mt-5","mb-4"],[1,"row","justify-content-center"],[1,"col-md-8","col-sm-10"],[1,"d-flex","flex-column","flex-md-row","align-items-center","border","rounded","p-4","bg-light"],[1,"flex-fill","pe-md-4","mb-4","mb-md-0","w-100"],[1,"mb-4","text-center",2,"color","#e84919"],[3,"ngSubmit"],[1,"mb-3"],["for","email",1,"form-label"],["type","email","required","","id","email","name","email","placeholder","Inserisci email",1,"form-control",3,"ngModelChange","ngModel"],["for","password",1,"form-label"],["type","password","required","","id","password","name","password","placeholder","Inserisci password",1,"form-control",3,"ngModelChange","ngModel"],["for","confirmPassword",1,"form-label"],["type","password","required","","id","confirmPassword","name","confirmPassword","placeholder","Reinserisci password",1,"form-control",3,"ngModelChange","ngModel"],[1,"text-red"],["type","submit",1,"btn","btn-light","w-100",2,"border-color","#e84919"],[1,"bi","bi-box-arrow-in-right","me-2",2,"color","#e84919"]],template:function(c,r){if(c&1){let a=x();n(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7)(4,"div",8)(5,"h2",9),s(6,"Reset password"),i(),n(7,"form",10,0),E("ngSubmit",function(){f(a);let t=m(8);return g(r.onSubmit(t))}),n(9,"div",11)(10,"label",12),s(11,"Email"),i(),n(12,"input",13,1),C("ngModelChange",function(t){return f(a),h(r.model().email,t)||(r.model().email=t),g(t)}),i(),u(14,D,2,2),i(),n(15,"div",11)(16,"label",14),s(17,"Password"),i(),n(18,"input",15,2),C("ngModelChange",function(t){return f(a),h(r.model().password,t)||(r.model().password=t),g(t)}),i(),u(20,O,1,1),i(),n(21,"div",11)(22,"label",16),s(23,"Conferma Password"),i(),n(24,"input",17,3),C("ngModelChange",function(t){return f(a),h(r.model().confirmPassword,t)||(r.model().confirmPassword=t),g(t)}),i(),u(26,U,2,0,"small",18),i(),n(27,"button",19),M(28,"i",20),s(29,"Reset"),i()()()()()()()}if(c&2){let a=m(8),p=m(13),t=m(19);l(12),_("ngModel",r.model().email),l(2),d(p.invalid&&(p.touched||a.submitted)?14:-1),l(4),_("ngModel",r.model().password),l(2),d(t.invalid&&(t.touched||a.submitted)?20:-1),l(4),_("ngModel",r.model().confirmPassword),l(2),d(!r.samePassword&&a.submitted?26:-1)}},dependencies:[j,I,T,W,q,L,B,N],encapsulation:2})}}return e})();export{$ as ResetPasswordComponent};
