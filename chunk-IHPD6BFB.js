import{a as A}from"./chunk-JC5442BX.js";import{e as F,h as Q}from"./chunk-YNLNNLDO.js";import{b as V,c as z,f as P,m as B}from"./chunk-HZ2NMNNL.js";import"./chunk-N7HB2IBM.js";import{$ as b,Ba as r,Fa as S,Gb as a,Hb as x,Ib as h,Lb as k,Mb as T,Nb as I,Oa as E,Pb as D,Qb as y,Ta as _,U as g,aa as f,db as m,ib as v,kb as M,lb as w,mb as L,nb as n,ob as o,pb as l,tb as C,ub as p,vb as u,za as R}from"./chunk-L66XQOBG.js";var N=()=>["/admin/recipes/add"],j=t=>["/admin/recipes",t],O=t=>["/admin/recipes/update",t];function W(t,d){t&1&&l(0,"i",38)}function q(t,d){t&1&&l(0,"i",38)}function U(t,d){t&1&&l(0,"i",39)}function G(t,d){if(t&1){let e=C();n(0,"div",23)(1,"div",24)(2,"a",25),l(3,"img",26),o()(),n(4,"div",27)(5,"div",28)(6,"div")(7,"p",29)(8,"span"),l(9,"i",30),n(10,"strong",31),a(11),o()(),n(12,"span",32),l(13,"i",33),a(14),l(15,"i",34),a(16,"5 "),o()(),n(17,"p")(18,"strong",31),a(19),o()(),n(20,"p"),a(21),o()(),n(22,"div",35)(23,"p",29)(24,"span"),l(25,"i",36)(26,"strong",31),a(27),l(28,"i",37)(29,"strong",31),a(30),_(31,W,1,0,"i",38)(32,q,1,0,"i",38)(33,U,1,0,"i",39),o(),n(34,"span")(35,"button",40),l(36,"i",41),o(),n(37,"button",42),p("click",function(){let c=b(e).$implicit,s=u(2);return f(s.openDeleteModal(c.id))}),l(38,"i",43),o(),n(39,"button",44),l(40,"i",45),o()()()()()()()}if(t&2){let e=d.$implicit;r(2),m("routerLink",y(11,j,e.id)),r(),m("src","data:image/jpeg;base64,"+e.immagineurl,R),r(8),x(e.categorianome),r(3),h("",e.recipeUser.length," "),r(5),x(e.titolo),r(2),x(e.descrizione),r(6),h("",e.tempocottura," "),r(3),h("",e.porzioni," "),r(),v(e.alimentazionenome=="Vegetariana"?31:e.alimentazionenome=="Vegana"?32:e.alimentazionenome=="Celiaca"?33:-1),r(4),m("routerLink",y(13,O,e.id)),r(4),m("routerLink",y(15,j,e.id))}}function H(t,d){if(t&1){let e=C();n(0,"div")(1,"div",11)(2,"h1",12),a(3,"Tutte le ricette di Ale in borghese"),o(),n(4,"div",13)(5,"div",14)(6,"div",15)(7,"input",16),I("ngModelChange",function(c){b(e);let s=u();return T(s.searchQuery,c)||(s.searchQuery=c),f(c)}),p("input",function(){b(e);let c=u();return f(c.filterRecipes())}),o(),n(8,"button",17),l(9,"i",18),o()()(),n(10,"div",19)(11,"a",20),l(12,"i",21),a(13," Crea Nuova Ricetta "),o()()(),n(14,"ul",22),w(15,G,41,17,"div",23,M),o()()()}if(t&2){let e=u();r(7),k("ngModel",e.searchQuery),r(4),m("routerLink",D(2,N)),r(4),L(e.filteredRecipes)}}function J(t,d){if(t&1&&(n(0,"div",10),a(1),o()),t&2){let e=u();r(),h(" \u26A0\uFE0F ",e.errorMessage,`
`)}}var ie=(()=>{class t{constructor(){this.recipeService=g(A),this.route=g(F),this.renderer=g(S),this.availableRecipes=[],this.errorMessage=null,this.filteredRecipes=[],this.searchQuery="",this.categoryQuery="",this.recipeIdToDelete=null}detailsRecipe(e){this.detailsRecipeSubscription=this.recipeService.getRecipeDetails(e).subscribe({next:i=>{console.log("Recipe details",i)},error:i=>{console.error("Error fetching recipe details",i),this.errorMessage=i.message},complete:()=>console.log("Chiamata API completata")})}deleteRecipe(e){this.deleteRecipeSubscription=this.recipeService.deleteRecipe(e).subscribe({next:i=>{console.log("Recipe deleted",i),this.loadRecipes()},error:i=>{console.error("Error deleting recipe",i),this.errorMessage=i.message},complete:()=>console.log("Chiamata API completata")})}editRecipe(e){throw new Error("Method not implemented.")}openDeleteModal(e){this.recipeIdToDelete=e;let i=document.getElementById("deleteModal");i&&(this.renderer.addClass(i,"show"),this.renderer.setStyle(i,"display","block"),this.renderer.setAttribute(i,"aria-modal","true"),this.renderer.setAttribute(i,"role","dialog"))}closeDeleteModal(){let e=document.getElementById("deleteModal");e&&(this.renderer.removeClass(e,"show"),this.renderer.setStyle(e,"display","none"),this.renderer.removeAttribute(e,"aria-modal"),this.renderer.removeAttribute(e,"role"))}confirmDelete(){this.recipeIdToDelete!==null&&this.recipeService.deleteRecipe(this.recipeIdToDelete).subscribe(()=>{this.loadRecipes(),this.recipeIdToDelete=null,this.closeDeleteModal()},e=>{this.errorMessage="Errore nell'eliminazione della ricetta"})}ngOnInit(){this.route.queryParams.subscribe(e=>{this.searchQuery=e.search||"",this.categoryQuery=e.category||"",this.loadRecipes()})}loadRecipes(){this.getRecipeSubscription=this.recipeService.getRecipes().subscribe({next:e=>{this.availableRecipes=e,this.filterRecipes()},error:e=>{console.error("Error fetching recipes",e),this.errorMessage=e.message},complete:()=>console.log("Chiamata API completata")})}filterRecipes(){console.log("Filtering recipes with text:",this.searchQuery),this.searchQuery?this.filteredRecipes=this.availableRecipes.filter(e=>e.titolo.toLowerCase().includes(this.searchQuery.toLowerCase())):this.categoryQuery?(console.log("Filtering recipes with category:",this.categoryQuery),this.filteredRecipes=this.availableRecipes.filter(e=>e.categorianome.includes(this.categoryQuery))):this.filteredRecipes=this.availableRecipes}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=E({type:t,selectors:[["app-recipe-list"]],decls:16,vars:2,consts:[["id","deleteModal","tabindex","-1","aria-labelledby","deleteModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","deleteModalLabel",1,"modal-title","text-orange"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"],[1,"error"],[1,"container"],[1,"mt-3",2,"color","#e84919"],[1,"row","align-items-center","mb-3","mt-4"],[1,"col-12","col-md-5","mb-2","mb-md-0"],[1,"input-group"],["type","text","placeholder","Filtra ricette...",1,"form-control",3,"ngModelChange","input","ngModel"],["type","button",1,"btn","btn-light","border-orange"],[1,"fa-solid","fa-magnifying-glass",2,"color","#e84919"],[1,"col-12","col-md-3","text-md-end"],[1,"btn","btn-light","w-100","w-md-auto",2,"border-color","#e84919",3,"routerLink"],[1,"fa-solid","fa-plus"],[1,"list-group","mb-4"],[1,"row","g-0","mt-4"],[1,"col-12","col-md-3"],[1,"text-decoration-none",3,"routerLink"],["alt","...",1,"img-fluid","d-block","w-100",2,"width","100%",3,"src"],[1,"col-12","col-md-5","d-flex","flex-column",2,"background-color","rgba(247, 246, 248, 1)"],[1,"p-2","d-flex","flex-column","h-100"],[1,"d-flex","justify-content-between","align-items-center"],[1,"fa-solid","fa-bowl-rice","me-2"],[2,"color","#e84919"],[1,"me-2"],[1,"bi","bi-chat-left-heart-fill","me-1"],[1,"fa-solid","fa-star","ms-2","me-1",2,"color","gold"],[1,"px-2","pt-2","mt-auto"],[1,"bi","bi-clock-fill","me-2"],[1,"fa-solid","fa-people-group","ms-4","me-2"],[1,"fa-solid","fa-leaf","ms-4","me-2"],[1,"fa-solid","fa-bread-slice","ms-4","me-2"],[1,"btn","btn-light","btn-sm","me-2",3,"routerLink"],[1,"bi","bi-pencil"],[1,"btn","btn-light","btn-sm","me-2",3,"click"],[1,"bi","bi-trash"],[1,"btn","btn-light","btn-sm",3,"routerLink"],[1,"bi","bi-book"]],template:function(i,c){i&1&&(_(0,H,17,3,"div"),n(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"h5",4),a(6,"Conferma eliminazione"),o(),n(7,"button",5),p("click",function(){return c.closeDeleteModal()}),o()(),n(8,"div",6),a(9," Sei sicuro di voler eliminare questa ricetta? "),o(),n(10,"div",7)(11,"button",8),p("click",function(){return c.closeDeleteModal()}),a(12,"Annulla"),o(),n(13,"button",9),p("click",function(){return c.confirmDelete()}),a(14,"Elimina"),o()()()()(),_(15,J,2,1,"div",10)),i&2&&(v(c.errorMessage?-1:0),r(15),v(c.errorMessage?15:-1))},dependencies:[B,V,z,P,Q],styles:[".btn-transparent.dropdown-toggle[_ngcontent-%COMP%]:after{display:none}.form-control[_ngcontent-%COMP%]:focus{border-color:#e84919;box-shadow:0 0 0 .2rem #e8491940}"]})}}return t})();export{ie as RecipeListComponent};
